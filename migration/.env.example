# Supabase Cloud to Self-Hosted Migration Configuration
# Copy this file to .env and fill in your actual values

# ============================================
# SOURCE (Supabase Cloud)
# ============================================

# Your Supabase Cloud project URL
# Find at: Supabase Dashboard → Settings → API → Project URL
SOURCE_SUPABASE_URL=https://xxxxx.supabase.co

# Your Supabase Cloud anonymous/public key
# Find at: Supabase Dashboard → Settings → API → Project API keys → anon public
SOURCE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Your Supabase Cloud database connection string
# Find at: Supabase Dashboard → Settings → Database → Connection string → URI
# Format: postgresql://postgres:[YOUR-PASSWORD]@db.xxxxx.supabase.co:5432/postgres
SOURCE_DATABASE_URL=postgresql://postgres:your-cloud-password@db.xxxxx.supabase.co:5432/postgres

# Optional: Project reference (usually part of your URL)
SOURCE_PROJECT_REF=xxxxx

# Optional: Service role key (for admin operations)
# Find at: Supabase Dashboard → Settings → API → Project API keys → service_role
SOURCE_SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase Management API Personal Access Token (REQUIRED for downloading Edge Functions)
# Create at: https://supabase.com/dashboard/account/tokens
# This token is used to access the Management API for listing and downloading edge function code
SOURCE_MANAGEMENT_API_TOKEN=sbp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional: Path to Edge Functions (for local files, not needed if downloading from cloud)
SOURCE_EDGE_FUNCTIONS_PATH=./supabase/functions

# ============================================
# TARGET (Self-Hosted Supabase)
# ============================================

# Your self-hosted PostgreSQL connection string
# For local JStack: postgresql://postgres:[PASSWORD]@localhost:5432/postgres
# Password found in: /home/jarvis/jstack/.env.secrets → POSTGRES_PASSWORD
TARGET_DATABASE_URL=postgresql://postgres:your-selfhosted-password@localhost:5432/postgres

# Optional: Self-hosted Supabase API URL (if you have Kong/API gateway running)
TARGET_SUPABASE_URL=http://localhost:8000

# Optional: Self-hosted anonymous key
TARGET_SUPABASE_ANON_KEY=your-self-hosted-anon-key

# Optional: Self-hosted service role key
TARGET_SUPABASE_SERVICE_KEY=your-self-hosted-service-key

# Optional: Where to save migrated Edge Functions (fallback only)
TARGET_EDGE_FUNCTIONS_PATH=./migrated-edge-functions

# Optional: JStack installation path (for edge functions import)
# Default: /home/jarvis/jstack
JSTACK_PATH=/home/jarvis/jstack

# ============================================
# TELEGRAM ID REPLACEMENT (Optional)
# ============================================

# Replace ALL user_telegram_id and chat_telegram_id values with this ID during migration
NEW_TELEGRAM_ID=987654321
